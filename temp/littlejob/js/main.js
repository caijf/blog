$(function(){function e(e){C&&(t(C),n(C)),document.getElementById(e).play(),C=e}function t(e){document.getElementById(e).pause()}function n(e){document.getElementById(e).currentTime=0}function a(e,t){var n=e.split("(")[1];n=n.split(")")[0],n=n.split(",");var a=n[0],o=n[1],i=(n[2],n[3],Math.sqrt(a*a+o*o)),s=Math.atan2(o,a);0>s&&(s+=2*Math.PI);var r=Math.round(s*(180/Math.PI));return"scale"===t?i:"rotate"===t?r:void 0}function o(e){var t=".detail_"+e;$(".showbox img").css("display","none"),$(t).css("display","block")}function i(e,t){var t=Math.max(e,t),e=Math.min(e,t);return Math.floor(Math.random()*(t-e+1)+e)}function s(){function t(){q.animate({rotate:360+X+"deg"},1e3,"linear",function(){q.animate({rotate:X+"deg"},0,"linear",function(){if(F)t();else{T=i(1,11);var n=32.7*(T-1)+X;q.animate({rotate:n+"deg"},n===X?100:2e3,"linear",function(){q.find(".single").eq(T-1).animate({padding:"0px"},100,"linear",function(){e(T+""),o(T+""),D=!0,k.removeClass(A)})})}})})}D=!1,t()}var r=[0,141],l=r[1]-r[0]+1,c=document.getElementById("container"),d=document.getElementById("loading"),m=(document.getElementById("audios"),{length:0});wx.config({debug:!1,appId:"",timestamp:1,nonceStr:"",signature:"",jsApiList:[]});for(var u=r[0];u<=r[1];u++)!function(e){var t=new Image;t.onload=function(){m.length++,m[e]=this,y()},t.onerror=function(){m.length++,y()};var n,a=e+"";1===a.length&&(n="LZL_0000"),2===a.length&&(n="LZL_000"),3===a.length&&(n="LZL_00"),t.src="./movie/LZL/"+n+e+".png"}(u);var g,p,f=1e4,h=parseInt(f/l,10).toFixed(2),v=d.getElementsByClassName("loading-inner")[0],y=function(){var e=Math.round(100*m.length/l);if(d.setAttribute("data-percent",e),v.style.width=e+"%",100==e){var t=r[0];c.innerHTML="";var n=function(){m[t-1]&&c.removeChild(m[t-1]),c.append?c.append(m[t]):c.appendChild(m[t]),t++,t<=r[1]?setTimeout(n,h):(document.getElementById("main2").pause(),wx.ready(function(){$(".container").css("display","none"),document.getElementById("ring").play()}))};wx.ready(function(){for(var e=document.getElementsByTagName("audio"),t=e.length-1;t>=0;t--)e[t].play(),e[t].pause();document.getElementById("main2").play(),setTimeout(n,100)})}},I=!1,x=(parseFloat($("html").css("font-size")),parseFloat($(".slider").css("left"))),w=parseFloat($(".slide-box").css("width")),B=parseFloat($(".slider").css("width")),E=w-B-x,b=x;$(".h5container").on("touchstart",".slider",function(e){I=!0,g=e.changedTouches[0].screenX}),$(".h5container").on("touchmove",function(e){if(I===!0){var t=e.changedTouches[0].screenX-g;b+=t,x>b&&(b=x),b>E&&(b=E),$(".slider").css("left",b+"px"),g=e.changedTouches[0].screenX}}),$(".h5container").on("touchend",function(){I===!0&&(p=b-x,p>(w-B)/2&&(b=E,$(".slider").animate({left:b+"px"},100,"ease-out"),$(".cover-slide").animate({opacity:0},100,function(){$(".cover-slide").css("display","none"),$(".word").animate({opacity:1},100,"ease-in"),document.getElementById("ring").setAttribute("loop","none"),document.getElementById("ring").pause(),document.getElementById("enter").play(),setTimeout(function(){$(".back1").css("display","none"),$(".word").css("display","block")},6e3)})),(w-B)/2>p&&(b=x,$(".slider").animate({left:b+"px"},100,"ease-out")),I=!1)});for(var C,M="",L=1;12>L;L++)M+='<div class="single"><img src="./img/static/'+L+'.png" alt=""></div>'.trim();$(".gifts").html(M);var T,F=!1,D=!0,Z=!1,_=$(".lightme"),k=$(".touchme"),A="active",X=a($(".gifts").css("transform"),"rotate"),q=$(".gifts");k.on("touchstart mousedown",function(e){e.preventDefault(),Z&&(Z=!1,_.removeClass(A),$(".moon").removeClass("active"),t("light"),n("light")),F===!1&&D&&(F=!0,k.addClass(A),$(".showbox img").css("display","none"),q.find(".single").animate({padding:"0.6667rem 0.6667rem 0px 0.6667rem"},100),"number"==typeof T&&t(T+""),s())}).on("touchend mouseup",function(e){e.preventDefault(),F=!1}),_.on("touchstart mousedown",function(t){t.preventDefault(),F===!1&&D&&(_.addClass(A),$(".moon").addClass("active"),$(".showbox img").css("display","none"),q.find(".single").animate({padding:"0.6667rem 0.6667rem 0px 0.6667rem"},100),Z||(Z=!0,e("light")))}).on("touchend mouseup",function(e){e.preventDefault(),_.removeClass(A),$(".moon").removeClass("active"),Z=!1,t("light"),n("light")})});