$(function(){function e(e){b&&(t(b),n(b)),document.getElementById(e).play(),b=e}function t(e){document.getElementById(e).pause()}function n(e){document.getElementById(e).currentTime=0}function a(e,t){var n=e.split("(")[1];n=n.split(")")[0],n=n.split(",");var a=n[0],i=n[1],s=(n[2],n[3],Math.sqrt(a*a+i*i)),o=Math.atan2(i,a);0>o&&(o+=2*Math.PI);var r=Math.round(o*(180/Math.PI));return"scale"===t?s:"rotate"===t?r:void 0}function i(e){var t=".detail_"+e;$(".showbox img").css("display","none"),$(t).css("display","block")}function s(t){if(F)Z=!1,$(".gifts").animate({rotate:360+q+"deg"},1e3,"linear",function(){$(".gifts").animate({rotate:q+"deg"},0,"linear",function(){s(t)})});else{var n=32.7*(t-1)+q;$(".gifts").animate({rotate:n+"deg"},n===q?100:2e3,"linear",function(){A.addClass(X),k.removeClass(X),M=t-1,e(t+""),i(t+""),_&&($(".moon").removeClass("active"),_=!1),$(".gifts .single").eq(M).animate({padding:"0px"},100,"linear",function(){Z=!0})})}}var o=[0,141],r=o[1]-o[0]+1,l=document.getElementById("container"),c=document.getElementById("loading"),d=(document.getElementById("audios"),{length:0});wx.config({debug:!1,appId:"",timestamp:1,nonceStr:"",signature:"",jsApiList:[]});for(var m=o[0];m<=o[1];m++)!function(e){var t=new Image;t.onload=function(){d.length++,d[e]=this,v()},t.onerror=function(){d.length++,v()};var n,a=e+"";1===a.length&&(n="LZL_0000"),2===a.length&&(n="LZL_000"),3===a.length&&(n="LZL_00"),t.src="./movie/LZL/"+n+e+".png"}(m);var u,g,p=1e4,f=parseInt(p/r,10).toFixed(2),h=c.getElementsByClassName("loading-inner")[0],v=function(){var e=Math.round(100*d.length/r);if(c.setAttribute("data-percent",e),h.style.width=e+"%",100==e){var t=o[0];l.innerHTML="";var n=function(){d[t-1]&&l.removeChild(d[t-1]),l.append?l.append(d[t]):l.appendChild(d[t]),t++,t<=o[1]?setTimeout(n,f):(document.getElementById("main2").pause(),wx.ready(function(){$(".container").css("display","none"),document.getElementById("ring").play()}))};wx.ready(function(){for(var e=document.getElementsByTagName("audio"),t=e.length-1;t>=0;t--)e[t].play(),e[t].pause();document.getElementById("main2").play(),setTimeout(n,100)})}},y=!1,I=(parseFloat($("html").css("font-size")),parseFloat($(".slider").css("left"))),x=parseFloat($(".slide-box").css("width")),B=parseFloat($(".slider").css("width")),E=x-B-I,w=I,C=!0;$(".h5container").on("touchstart",".slider",function(e){y=!0,u=e.changedTouches[0].screenX}),$(".h5container").on("touchmove",function(e){if(y===!0){var t=e.changedTouches[0].screenX-u;w+=t,I>w&&(w=I),w>E&&(w=E),$(".slider").css("left",w+"px"),u=e.changedTouches[0].screenX}}),$(".h5container").on("touchend",function(){y===!0&&(g=w-I,g>(x-B)/2&&(w=E,$(".slider").animate({left:w+"px"},100,"ease-out"),$(".cover-slide").animate({opacity:0},100,function(){$(".cover-slide").css("display","none"),$(".word").animate({opacity:1},100,"ease-in"),document.getElementById("ring").setAttribute("loop","none"),document.getElementById("ring").pause(),document.getElementById("enter").play(),setTimeout(function(){$(".back1").css("display","none"),$(".word").css("display","block"),C=!1},6e3)})),(x-B)/2>g&&(w=I,$(".slider").animate({left:w+"px"},100,"ease-out")),y=!1)});for(var b,L="",T=1;12>T;T++)L+='<div class="single"><img src="./img/static/'+T+'.png" alt=""></div>'.trim();$(".gifts").html(L);var M=1,F=!1,Z=!0,_=!1,k=$(".lightme"),A=$(".touchme"),X="active",q=a($(".gifts").css("transform"),"rotate");A.tap(function(e){if(e.preventDefault(),$(".showbox img").css("display","none"),A.addClass(X),k.removeClass(X),F===!1&&!C&&Z){_&&($(".moon").removeClass("active"),_=!1),b&&(t(b),n(b)),$(".gifts .single").animate({padding:"0.6667rem 0.6667rem 0px 0.6667rem"},100);var a=parseInt(11*Math.random())+1;F=!0,s(a),setTimeout(function(){F=!1},1e3)}}),$(".lightme").tap(function(t){t.preventDefault(),k.addClass(X),A.removeClass(X),$(".moon").addClass("active"),$(".showbox img").css("display","none"),$(".gifts .single").animate({padding:"0.6667rem 0.6667rem 0px 0.6667rem"},100),_||e("light"),_=!0})});