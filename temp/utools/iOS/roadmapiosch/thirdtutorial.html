<!DOCTYPE html><meta http-equiv="X-UA-Compatible" content="IE=Edge" />

<html>
  <head>  
  <title>马上着手开发 iOS 应用程序 (Start Developing iOS Apps Today): 教程：添加数据</title>
  <link rel="stylesheet" type="text/css" href="../assets/css/style-1.1.15.css" />
  <link rel="stylesheet" type="text/css" href="../assets/css/feedback-1.1.15.css" />
  <meta charset='utf-8'> 


<meta id="xcode-display" name="xcode-display" content="render" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name = "viewport" content = "width = device-width, maximum-scale=1.0">
</head>

  <body id="roadmap" class='jazz'>
    
    <header id="ios_header" class="hideOnPrint hideInXcode">
  <div class="content-wrapper">
    <p class="header-text">
    	<a href="#">iOS Developer Library
 		</a>
 </p>
    <p id="wwdr"><img id="apple_logo" src="../assets/images/apple2.png" height="14px" width="12px" aria-hidden="true" /><a href="#">Developer</a></p>
  </div>
</header>
    <section id="valence">
  <div class="content-wrapper">
	<p id="hierarchial_navigation">
		<span id="book_title">马上着手开发 iOS 应用程序 (Start Developing iOS Apps Today)</span>
	</p>
	<form id='search' class='hideInXcode' method='get' action="../../../search/" accept-charset='utf-8'>
            <input type='search' id='ssi_SearchField' placeholder="Search all documents" name='q' accesskey='s' />
        </form>
    	<a href="roadmapiosch.pdf" class="download-text hideInXcode">Download PDF</a>
    <img id="shortstack" src="../assets/images/shortstack_2x.png"/>
  </div>
</section>
    <div class="content-wrapper">
      <nav class='book-parts hideInXcode'>
    <ul class="nav-parts">
        <li data-id="//apple_ref/doc/uid/TP40012668-CH14-SW1" class="part-name">介绍
          <ul class="nav-chapters">
              <li class="nav-chapter conceptual-with-tasks">
              	<a href="index.html#//apple_ref/doc/uid/TP40012668-CH2-SW1" data-id="//apple_ref/doc/uid/TP40012668-CH2-SW1">设置<div class='pipe'></div></a>
              </li>
              <li class="nav-chapter tutorial">
              	<a href="firsttutorial.html#//apple_ref/doc/uid/TP40012668-CH3-SW1" data-id="//apple_ref/doc/uid/TP40012668-CH3-SW1">教程：基础<div class='pipe'></div></a>
              </li>
          </ul>
        <li data-id="//apple_ref/doc/uid/TP40012668-CH15-SW1" class="part-name">构建应用程序
          <ul class="nav-chapters">
              <li class="nav-chapter conceptual-with-tasks">
              	<a href="appdevelopmentprocess.html#//apple_ref/doc/uid/TP40012668-CH4-SW1" data-id="//apple_ref/doc/uid/TP40012668-CH4-SW1">应用程序开发过程<div class='pipe'></div></a>
              </li>
              <li class="nav-chapter conceptual-with-tasks">
              	<a href="designingauserinterface.html#//apple_ref/doc/uid/TP40012668-CH6-SW1" data-id="//apple_ref/doc/uid/TP40012668-CH6-SW1">设计用户界面<div class='pipe'></div></a>
              </li>
              <li class="nav-chapter conceptual-with-tasks">
              	<a href="definingtheinteraction.html#//apple_ref/doc/uid/TP40012668-CH7-SW1" data-id="//apple_ref/doc/uid/TP40012668-CH7-SW1">定义交互<div class='pipe'></div></a>
              </li>
              <li class="nav-chapter tutorial">
              	<a href="secondtutorial.html#//apple_ref/doc/uid/TP40012668-CH8-SW1" data-id="//apple_ref/doc/uid/TP40012668-CH8-SW1">教程：串联图<div class='pipe'></div></a>
              </li>
          </ul>
        <li data-id="//apple_ref/doc/uid/TP40012668-CH16-SW1" class="part-name">应用程序的实现
          <ul class="nav-chapters">
              <li class="nav-chapter conceptual-with-tasks">
              	<a href="incorporatingthedata.html#//apple_ref/doc/uid/TP40012668-CH19-SW1" data-id="//apple_ref/doc/uid/TP40012668-CH19-SW1">整合数据<div class='pipe'></div></a>
              </li>
              <li class="nav-chapter conceptual-with-tasks">
              	<a href="designpatterns.html#//apple_ref/doc/uid/TP40012668-CH5-SW1" data-id="//apple_ref/doc/uid/TP40012668-CH5-SW1">使用设计模式<div class='pipe'></div></a>
              </li>
              <li class="nav-chapter conceptual-with-tasks">
              	<a href="foundationclasses.html#//apple_ref/doc/uid/TP40012668-CH9-SW1" data-id="//apple_ref/doc/uid/TP40012668-CH9-SW1">处理 Foundation<div class='pipe'></div></a>
              </li>
              <li class="nav-chapter conceptual-with-tasks">
              	<a href="writingacustomclass.html#//apple_ref/doc/uid/TP40012668-CH18-SW1" data-id="//apple_ref/doc/uid/TP40012668-CH18-SW1">编写自定类<div class='pipe'></div></a>
              </li>
              <li class="nav-chapter tutorial">
              	<a href="#//apple_ref/doc/uid/TP40012668-CH10-SW1" data-id="//apple_ref/doc/uid/TP40012668-CH10-SW1">教程：添加数据<div class='pipe'></div></a>
              </li>
          </ul>
        <li data-id="//apple_ref/doc/uid/TP40012668-CH17-SW1" class="part-name">后续步骤
          <ul class="nav-chapters">
              <li class="nav-chapter conceptual-with-tasks">
              	<a href="iostechnologies.html#//apple_ref/doc/uid/TP40012668-CH11-SW1" data-id="//apple_ref/doc/uid/TP40012668-CH11-SW1">iOS 技术<div class='pipe'></div></a>
              </li>
              <li class="nav-chapter conceptual-with-tasks">
              	<a href="findinginformation.html#//apple_ref/doc/uid/TP40012668-CH13-SW1" data-id="//apple_ref/doc/uid/TP40012668-CH13-SW1">查找信息<div class='pipe'></div></a>
              </li>
              <li class="nav-chapter conceptual-with-tasks">
              	<a href="wheretogofromhere.html#//apple_ref/doc/uid/TP40012668-CH12-SW1" data-id="//apple_ref/doc/uid/TP40012668-CH12-SW1">接下来做什么<div class='pipe'></div></a>
              </li>
          </ul>
      </li>
    </ul>
</nav>
      <article class="chapter">
  <a name="//apple_ref/doc/uid/TP40012668-CH10-SW1"></a>
  <a name="//apple_ref/doc/uid/TP40012668-CH10"></a>
  <h2 class='chapter-name chapter-name-short'>教程：添加数据</h2>
    <section id="mini_toc" class="hideInXcode" role="navigation">
	<div id="mini_toc_button">
  	<p>On This Page</p>
  </div>
  <ul class="list-bullet">
  		<li class="item">
  			<p class="para">
	  			<a href="#//apple_ref/doc/uid/TP40012668-CH10-SW2">
	  				创建数据类
	  			</a>
  			</p>
  		</li>
  		<li class="item">
  			<p class="para">
	  			<a href="#//apple_ref/doc/uid/TP40012668-CH10-SW3">
	  				载入数据
	  			</a>
  			</p>
  		</li>
  		<li class="item">
  			<p class="para">
	  			<a href="#//apple_ref/doc/uid/TP40012668-CH10-SW4">
	  				显示数据
	  			</a>
  			</p>
  		</li>
  		<li class="item">
  			<p class="para">
	  			<a href="#//apple_ref/doc/uid/TP40012668-CH10-SW5">
	  				将项目标记为已完成
	  			</a>
  			</p>
  		</li>
  		<li class="item">
  			<p class="para">
	  			<a href="#//apple_ref/doc/uid/TP40012668-CH10-SW6">
	  				添加新项目
	  			</a>
  			</p>
  		</li>
  		<li class="item">
  			<p class="para">
	  			<a href="#//apple_ref/doc/uid/TP40012668-CH10-SW7">
	  				小结
	  			</a>
  			</p>
  		</li>
	</ul>
</section>

  
  	<section class="section">
  		<p class="para">
  本教程以第二个教程（“<span class="x-name"><a href="secondtutorial.html#//apple_ref/doc/uid/TP40012668-CH8-SW1" data-id="//apple_ref/doc/uid/TP40012668-CH8-SW1">教程：串联图</a></span>”）中创建的项目为基础。您将用到从使用设计模式、使用 Foundation 以及编写自定类中学到的知识，在 ToDoList 应用程序中添加对动态数据的支持。
</p>
<p class="para">
  本教程讲述了以下操作：
</p>
<ul class="list-bullet">
  <li class="item"><p class="para">
  使用常见的 Foundation 类
</p>
</li><li class="item"><p class="para">
  创建自定数据类
</p>
</li><li class="item"><p class="para">
  实现委托和数据源协议
</p>
</li><li class="item"><p class="para">
  在视图控制器之间传递数据
</p>
</li>
</ul>
<p class="para">
  完成本教程中的所有步骤后，您的应用程序外观大致是这样的：
</p>
<div class="two-columns">
  <div class="left-column">
    <img class="inline-graphic" src="art/ios_simulator_add_new_item_2x.png" alt="image: ../Art/ios_simulator_add_new_item_2x.png" width="320" height="568" />
  </div>
  <div class="right-column">
    <img class="inline-graphic" src="art/ios_simulator_full_list_checked_2x.png" alt="image: ../Art/ios_simulator_full_list_checked_2x.png" width="320" height="568" />
  </div>
</div>

		</section> 
  <section class="section">
  <a name="//apple_ref/doc/uid/TP40012668-CH10-SW2"></a>
  <h3 class="section-name" tabindex="0">创建数据类</h3>
  <p class="para">
  现在就开始吧，请在 Xcode 中打开您的现有项目。
</p><p class="para">
  目前，使用串联图的 ToDoList 应用程序有一个界面和一个导航方案。现在，是时候使用模型对象来添加数据储存和行为了。
</p><p class="para">
  应用程序的目标在于创建一个待办事项列表，因此首先您将创建一个自定类 <code class="code-voice">XYZToDoItem</code> 来表示单个待办事项。您应该记得，<code class="code-voice">XYZToDoItem</code> 类已经在<span class="x-name"><a href="writingacustomclass.html#//apple_ref/doc/uid/TP40012668-CH18-SW1" data-id="//apple_ref/doc/uid/TP40012668-CH18-SW1">编写自定类</a></span>中讨论过。
</p><p class="para">
  <strong class="inline-head">创建 XYZToDoItem 类</strong>
</p><ol class="list-number">
  <li class="item"><p class="para">
  选取“File”&gt;“New”&gt;“File”（或按下 Command-N）。
</p>
<p class="para">
  这时将会出现一个对话框，提示您为新文件选取模板。
</p>
</li><li class="item"><p class="para">
  从左侧的 iOS 下方选择“Cocoa Touch”。
</p>
</li><li class="item"><p class="para">
  选择“Objective-C Class”，并点按“Next”。
</p>
</li><li class="item"><p class="para">
  在“Class”栏中，在 <code class="code-voice">XYZ</code> 前缀后键入 <code class="code-voice">ToDoItem</code>。
</p>
</li><li class="item"><p class="para">
  从“Subclass of”弹出式菜单中选取“NSObject”。
</p>
<p class="para">
  如果您完全按照本教程操作，那么在这个步骤之前，“Class”标题可能是 <code class="code-voice">XYZToDoItemViewController</code>。选取 NSObject 作为“Subclass of”后，Xcode 会知道您创建了一个正常的自定类，并移除了它先前添加的 <code class="code-voice">ViewController</code> 文本。
</p>
</li><li class="item"><p class="para">
  点按“Next”。
</p>
</li><li class="item"><p class="para">
  存储位置默认为您的项目目录。此处无需更改。
</p>
</li><li class="item"><p class="para">
  “Group”选项默认为您的应用程序名称“ToDoList”。此处无需更改。
</p>
</li><li class="item"><p class="para">
  “Targets”部分默认选定您的应用程序，未选定应用程序的测试。好极了，这些都无需更改。
</p>
</li><li class="item"><p class="para">
  点按“Create”。
</p>
</li>
</ol><p class="para">
  <code class="code-voice">XYZToDoItem</code> 类很容易实现。它具有项目名称、创建日期，以及该项目是否已完成等属性。继续将这些属性添加到 <code class="code-voice">XYZToDoItem</code> 类接口。
</p><p class="para">
  <strong class="inline-head">配置 XYZToDoItem 类</strong>
</p><ol class="list-number">
  <li class="item"><p class="para">
  在项目导航器中，选择 <code class="code-voice">XYZToDoItem.h</code>。
</p>
</li><li class="item"><p class="para">
  将以下属性添加到该接口，使声明如下所示：
</p>
<section class="code-listing">
  
  <span class="caption"></span>
  <div class="code-sample">
    <ol class="code-lines">
        <li><code class="code-voice"><span class="k">@interface</span> <span class="nc">XYZToDoItem</span> : <span class="nc">NSObject</span>
</code></li>
        <li><code class="code-voice"> 
</code></li>
        <li><code class="code-voice"><span class="k">@property</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">itemName</span><span class="p">;</span>
</code></li>
        <li><code class="code-voice"><span class="k">@property</span> <span class="kt">BOOL</span> <span class="n">completed</span><span class="p">;</span>
</code></li>
        <li><code class="code-voice"><span class="k">@property</span> <span class="p">(</span><span class="n">readonly</span><span class="p">)</span> <span class="n">NSDate</span> <span class="o">*</span><span class="n">creationDate</span><span class="p">;</span>
</code></li>
        <li><code class="code-voice"> 
</code></li>
        <li><code class="code-voice"><span class="k">@end</span>
</code></li>
    </ol>
  </div>
</section>
</li>
</ol><p class="para">
  <em>检查点：</em>通过选取“Product”&gt;“Build”（或按下 Command-B）来生成项目。尽管该新类尚未实现任何功能，但是生成它有助于编译器验证任何拼写错误。如果发现错误，请及时修正：通读编辑器提供的警告或错误，然后回顾本教程中的说明，确保所有内容与此处的描述相符。
</p>
  
</section>
<section class="section">
  <a name="//apple_ref/doc/uid/TP40012668-CH10-SW3"></a>
  <h3 class="section-name" tabindex="0">载入数据</h3>
  <p class="para">
  您现在有一个类，可以用它作为基础来为单个列表项目创建并储存数据。您还需要保留一个项目列表。在 <code class="code-voice">XYZToDoListViewController</code> 类中跟踪此内容较为合适，视图控制器负责协调模型和视图，所以需要对模型进行引用。
</p><p class="para">
  Foundation 框架有一个 <code class="code-voice">NSMutableArray</code> 类，很适合跟踪项目列表。此处必须使用可变数组，这样用户就可以将项目添加到数组。因为不可变数组 <code class="code-voice">NSArray</code> 在其初始化后将不允许添加项目。
</p><p class="para">
  要使用数组，您需要声明并创建它。可以通过分配并初始化数组来完成。
</p><p class="para">
  <strong class="inline-head">要分配并初始化数组</strong>
</p><ol class="list-number">
  <li class="item"><p class="para">
  在项目导航器中，选择 <code class="code-voice">XYZToDoListViewController.m</code>。
</p>
<p class="para">
  由于项目数组是表格视图控制器的实现细节，所以应该在 .m 文件中进行声明，而不是 .h 文件。此操作可让项目数组成为您自定类的私有数组。
</p>
</li><li class="item"><p class="para">
  将以下属性添加到接口类别中，它是由 Xcode 在您的自定表格视图控制器类中创建的。声明应该是这样的：
</p>
<section class="code-listing">
  
  <span class="caption"></span>
  <div class="code-sample">
    <ol class="code-lines">
        <li><code class="code-voice"><span class="k">@interface</span> <span class="nc">XYZToDoListViewController</span> <span class="p">()</span>
</code></li>
        <li><code class="code-voice"> 
</code></li>
        <li><code class="code-voice"><span class="k">@property</span> <span class="n">NSMutableArray</span> <span class="o">*</span><span class="n">toDoItems</span><span class="p">;</span>
</code></li>
        <li><code class="code-voice"> 
</code></li>
        <li><code class="code-voice"><span class="k">@end</span>
</code></li>
    </ol>
  </div>
</section>
</li><li class="item"><p class="para">
  在 <code class="code-voice">viewDidLoad</code> 方法中分配并初始化 <code class="code-voice">toDoItems</code> 数组：
</p>
<section class="code-listing">
  
  <span class="caption"></span>
  <div class="code-sample">
    <ol class="code-lines">
        <li><code class="code-voice"><span class="o">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">viewDidLoad</span>
</code></li>
        <li><code class="code-voice"><span class="p">{</span>
</code></li>
        <li><code class="code-voice">    <span class="p">[</span><span class="n">super</span> <span class="n">viewDidLoad</span><span class="p">];</span>
</code></li>
        <li><code class="code-voice">    <span class="n">self</span><span class="p">.</span><span class="n">toDoItems</span> <span class="o">=</span> <span class="p">[[</span><span class="n">NSMutableArray</span> <span class="n">alloc</span><span class="p">]</span> <span class="n">init</span><span class="p">];</span>
</code></li>
        <li><code class="code-voice"><span class="p">}</span>
</code></li>
    </ol>
  </div>
</section>
</li>
</ol><p class="para">
  <code class="code-voice">viewDidLoad</code> 的实际代码中有一些附加行被注释掉了，那些行是 Xcode 创建 <code class="code-voice">XYZListViewController</code> 时插入的。保留与否都没有影响。
</p><p class="para">
  现在，您已经拥有了一个可以添加项目的数组。添加项目将在单独的方法 <code class="code-voice">loadInitialData</code> 中进行，并将通过 <code class="code-voice">viewDidLoad</code> 调用该方法。由于此代码是一个模块化任务，所以会进入其自身的方法中。当然您也可以将方法分离出来，从而提高代码的可读性。在真正的应用程序中，此方法可能会从某种永久储存形式载入数据，例如文件。现在，我们的目标是了解表格视图如何处理自定数据项目，那么让我们创建一些测试数据来体验一下吧。
</p><p class="para">
  以创建数组的方式创建项目：分配并初始化。然后，给项目命名。该名称将显示在表格视图中。按照此方法创建一组项目。
</p><p class="para">
  <strong class="inline-head">载入初始数据</strong>
</p><ol class="list-number">
  <li class="item"><p class="para">
  在 <code class="code-voice">@implementation</code> 行下方，添加一个新方法 <code class="code-voice">loadInitialData</code>。
</p>
<section class="code-listing">
  
  <span class="caption"></span>
  <div class="code-sample">
    <ol class="code-lines">
        <li><code class="code-voice"><span class="o">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">loadInitialData</span> <span class="p">{</span>
</code></li>
        <li><code class="code-voice"><span class="p">}</span>
</code></li>
    </ol>
  </div>
</section>
</li><li class="item"><p class="para">
  在此方法中，创建几个列表项目，并将它们添加到数组。
</p>
<section class="code-listing">
  
  <span class="caption"></span>
  <div class="code-sample">
    <ol class="code-lines">
        <li><code class="code-voice"><span class="o">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">loadInitialData</span> <span class="p">{</span>
</code></li>
        <li><code class="code-voice">    <span class="n">XYZToDoItem</span> <span class="o">*</span><span class="n">item1</span> <span class="o">=</span> <span class="p">[[</span><span class="n">XYZToDoItem</span> <span class="n">alloc</span><span class="p">]</span> <span class="n">init</span><span class="p">];</span>
</code></li>
        <li><code class="code-voice">    <span class="n">item1</span><span class="p">.</span><span class="n">itemName</span> <span class="o">=</span> <span class="s">@&quot;Buy milk&quot;</span><span class="p">;</span>
</code></li>
        <li><code class="code-voice">    <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">toDoItems</span> <span class="nl">addObject:</span><span class="n">item1</span><span class="p">];</span>
</code></li>
        <li><code class="code-voice">    <span class="n">XYZToDoItem</span> <span class="o">*</span><span class="n">item2</span> <span class="o">=</span> <span class="p">[[</span><span class="n">XYZToDoItem</span> <span class="n">alloc</span><span class="p">]</span> <span class="n">init</span><span class="p">];</span>
</code></li>
        <li><code class="code-voice">    <span class="n">item2</span><span class="p">.</span><span class="n">itemName</span> <span class="o">=</span> <span class="s">@&quot;Buy eggs&quot;</span><span class="p">;</span>
</code></li>
        <li><code class="code-voice">    <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">toDoItems</span> <span class="nl">addObject:</span><span class="n">item2</span><span class="p">];</span>
</code></li>
        <li><code class="code-voice">    <span class="n">XYZToDoItem</span> <span class="o">*</span><span class="n">item3</span> <span class="o">=</span> <span class="p">[[</span><span class="n">XYZToDoItem</span> <span class="n">alloc</span><span class="p">]</span> <span class="n">init</span><span class="p">];</span>
</code></li>
        <li><code class="code-voice">    <span class="n">item3</span><span class="p">.</span><span class="n">itemName</span> <span class="o">=</span> <span class="s">@&quot;Read a book&quot;</span><span class="p">;</span>
</code></li>
        <li><code class="code-voice">    <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">toDoItems</span> <span class="nl">addObject:</span><span class="n">item3</span><span class="p">];</span>
</code></li>
        <li><code class="code-voice"><span class="p">}</span>
</code></li>
    </ol>
  </div>
</section>
</li><li class="item"><p class="para">
  在 <code class="code-voice">viewDidLoad</code> 方法中调用 <code class="code-voice">loadInitialData</code>。
</p>
<section class="code-listing">
  
  <span class="caption"></span>
  <div class="code-sample">
    <ol class="code-lines">
        <li><code class="code-voice"><span class="o">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">viewDidLoad</span>
</code></li>
        <li><code class="code-voice"><span class="p">{</span>
</code></li>
        <li><code class="code-voice">    <span class="p">[</span><span class="n">super</span> <span class="n">viewDidLoad</span><span class="p">];</span>
</code></li>
        <li><code class="code-voice">    <span class="n">self</span><span class="p">.</span><span class="n">toDoItems</span> <span class="o">=</span> <span class="p">[[</span><span class="n">NSMutableArray</span> <span class="n">alloc</span><span class="p">]</span> <span class="n">init</span><span class="p">];</span>
</code></li>
        <li><code class="code-voice">    <span class="p">[</span><span class="n">self</span> <span class="n">loadInitialData</span><span class="p">];</span>
</code></li>
        <li><code class="code-voice"><span class="p">}</span>
</code></li>
    </ol>
  </div>
</section>
</li>
</ol><p class="para">
  <em>检查点：</em>通过选取“Product”&gt;“Build”来生成项目。您应该会在 <code class="code-voice">loadInitialData</code> 方法的代码行上看到大量错误。第一行是出错的关键所在，错误提示应该是“Use of undeclared identifier XYZToDoItem”。这说明编译器在编译 <code class="code-voice">XYZToDoListViewController</code> 时不知道 <code class="code-voice">XYZToDoItem</code>。编译器比较特别，您需要明确告知它应当注意什么。
</p><p class="para">
  <strong class="inline-head">让编译器注意您的自定列表项目类</strong>
</p><ol class="list-number">
  <li class="item"><p class="para">
  在 <code class="code-voice">XYZToDoListViewController.m</code> 文件的顶部附近找到 <code class="code-voice">#import &quot;XYZToDoListViewController.h&quot;</code> 行。
</p>
</li><li class="item"><p class="para">
  紧接着在其下方添加以下行：
</p>
<section class="code-listing">
  
  <span class="caption"></span>
  <div class="code-sample">
    <ol class="code-lines">
        <li><code class="code-voice"><span class="cp">#import &quot;XYZToDoItem.h&quot;</span>
</code></li>
    </ol>
  </div>
</section>
</li>
</ol><p class="para">
  <em>检查点：</em>通过选取“Product”&gt;“Build”来生成项目。项目生成时应该没有错误。
</p>
  
</section>
<section class="section">
  <a name="//apple_ref/doc/uid/TP40012668-CH10-SW4"></a>
  <h3 class="section-name" tabindex="0">显示数据</h3>
  <p class="para">
  目前，表格视图具有一个可变数组，预填充了几个示例待办事项。现在您需要在表格视图中显示数据。
</p><p class="para">
  通过让 <code class="code-voice">XYZToDoListViewController</code> 成为表格视图的数据源，可以实现这一点。无论要让什么成为表格视图的数据源，都需要实施 <code class="code-voice">UITableViewDataSource</code> 协议。需要实施的方法正是您在第二个教程中注释掉的那些。创建有效的表格视图需要三个方法。第一个方法是 <code class="code-voice">numberOfSectionsInTableView:</code>，它告诉表格视图要显示几个部分。对于此应用程序，表格视图只需要显示一个部分，所以实现比较简单。 
</p><p class="para">
  <strong class="inline-head">在表格中显示一个部分</strong>
</p><ol class="list-number">
  <li class="item"><p class="para">
  在项目导航器中，选择 <code class="code-voice">XYZToDoListViewController.m</code>。
</p>
</li><li class="item"><p class="para">
  如果您在第二个教程中注释掉了表格视图数据源方法，现在请移除那些注释标记。
</p>
</li><li class="item"><p class="para">
  模板实现的部分如下所示。
</p>
<section class="code-listing">
  
  <span class="caption"></span>
  <div class="code-sample">
    <ol class="code-lines">
        <li><code class="code-voice"><span class="o">-</span> <span class="p">(</span><span class="n">NSInteger</span><span class="p">)</span><span class="nl">numberOfSectionsInTableView:</span><span class="p">(</span><span class="n">UITableView</span> <span class="o">*</span><span class="p">)</span><span class="n">tableView</span>
</code></li>
        <li><code class="code-voice"><span class="p">{</span>
</code></li>
        <li><code class="code-voice"><span class="cp">#warning Potentially incomplete method implementation.</span>
</code></li>
        <li><code class="code-voice">    <span class="c1">// Return the number of sections.</span>
</code></li>
        <li><code class="code-voice">    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</code></li>
        <li><code class="code-voice"><span class="p">}</span>
</code></li>
    </ol>
  </div>
</section>
<p class="para">
  您想要单个部分，所以需要移除警告行并将返回值由 0 更改为 1。
</p>
</li><li class="item"><p class="para">
  更改 <code class="code-voice">numberOfSectionsInTableView:</code> 数据源方法以便返回单个部分，像这样：
</p>
<section class="code-listing">
  
  <span class="caption"></span>
  <div class="code-sample">
    <ol class="code-lines">
        <li><code class="code-voice"><span class="o">-</span> <span class="p">(</span><span class="n">NSInteger</span><span class="p">)</span><span class="nl">numberOfSectionsInTableView:</span><span class="p">(</span><span class="n">UITableView</span> <span class="o">*</span><span class="p">)</span><span class="n">tableView</span>
</code></li>
        <li><code class="code-voice"><span class="p">{</span>
</code></li>
        <li><code class="code-voice">    <span class="c1">// Return the number of sections.</span>
</code></li>
        <li><code class="code-voice">    <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
</code></li>
        <li><code class="code-voice"><span class="p">}</span>
</code></li>
    </ol>
  </div>
</section>
</li>
</ol><p class="para">
  下一个方法 <code class="code-voice">tableView:numberOfRowsInSection:</code> 告诉表格视图要在给定部分中显示几行。现在表格中有一个部分，并且每个待办事项在表格视图中都应该有它自己的行。这意味着行数应该等于 <code class="code-voice">toDoItems</code> 数组中的 <code class="code-voice">XYZToDoItem</code> 对象数。
</p><p class="para">
  <strong class="inline-head">返回表格中的行数</strong>
</p><ol class="list-number">
  <li class="item"><p class="para">
  在项目导航器中，选择 <code class="code-voice">XYZToDoListViewController.m</code>。
</p>
</li><li class="item"><p class="para">
  您可看到模板实现的部分是这样的：
</p>
<section class="code-listing">
  
  <span class="caption"></span>
  <div class="code-sample">
    <ol class="code-lines">
        <li><code class="code-voice"><span class="o">-</span> <span class="p">(</span><span class="n">NSInteger</span><span class="p">)</span><span class="nl">tableView:</span><span class="p">(</span><span class="n">UITableView</span> <span class="o">*</span><span class="p">)</span><span class="n">tableView</span> <span class="nl">numberOfRowsInSection:</span><span class="p">(</span><span class="n">NSInteger</span><span class="p">)</span><span class="n">section</span>
</code></li>
        <li><code class="code-voice"><span class="p">{</span>
</code></li>
        <li><code class="code-voice"><span class="cp">#warning Incomplete method implementation.</span>
</code></li>
        <li><code class="code-voice">    <span class="c1">// Return the number of rows in the section.</span>
</code></li>
        <li><code class="code-voice">    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</code></li>
        <li><code class="code-voice"><span class="p">}</span>
</code></li>
    </ol>
  </div>
</section>
<p class="para">
  您想要返回所拥有的列表项目的数量。幸运的是，<code class="code-voice">NSArray</code> 有一个很方便的方法，称为 <code class="code-voice">count</code>，它会返回数组中的项目数，因此行数是 <code class="code-voice">[self.toDoItems count]</code>。
</p>
</li><li class="item"><p class="para">
  更改 <code class="code-voice">tableView:numberOfRowsInSection:</code> 数据源方法，使其返回正确的行数。
</p>
<section class="code-listing">
  
  <span class="caption"></span>
  <div class="code-sample">
    <ol class="code-lines">
        <li><code class="code-voice"><span class="o">-</span> <span class="p">(</span><span class="n">NSInteger</span><span class="p">)</span><span class="nl">tableView:</span><span class="p">(</span><span class="n">UITableView</span> <span class="o">*</span><span class="p">)</span><span class="n">tableView</span> <span class="nl">numberOfRowsInSection:</span><span class="p">(</span><span class="n">NSInteger</span><span class="p">)</span><span class="n">section</span>
</code></li>
        <li><code class="code-voice"><span class="p">{</span>
</code></li>
        <li><code class="code-voice">    <span class="c1">// Return the number of rows in the section.</span>
</code></li>
        <li><code class="code-voice">    <span class="k">return</span> <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">toDoItems</span> <span class="n">count</span><span class="p">];</span>
</code></li>
        <li><code class="code-voice"><span class="p">}</span>
</code></li>
    </ol>
  </div>
</section>
</li>
</ol><p class="para">
  最后一个方法，<code class="code-voice">tableView:cellForRowAtIndexPath:</code> 请求一个单元格来显示给定行。到现在为止，您只是处理了代码，但是界面的绝大部分是针对行显示的单元格。幸运的是，Xcode 可让您轻松地在 Interface Builder 中设计自定单元格。首个任务是设计您的单元格，并告诉表格视图不要使用静态内容，而要使用具有动态内容的原型单元格。
</p><p class="para">
  <strong class="inline-head">配置表格视图</strong>
</p><ol class="list-number">
  <li class="item"><p class="para">
  打开串联图。
</p>
</li><li class="item"><p class="para">
  在大纲中选择表格视图。
</p>
</li><li class="item"><p class="para">
  选定表格视图后，在实用工具区域中打开“Attributes”检查器 <img class="inline-graphic" src="art/inspector_attributes_2x.png" alt="image: ../Art/inspector_attributes_2x.png" width="20" height="16" />。
</p>
</li><li class="item"><p class="para">
  在“Attributes”检查器中，将表格视图的“Content”属性从“Static Cells”更改为“Dynamic Prototypes”。
</p>
</li>
</ol><p class="para">
  Interface Builder 会采用您配置的静态单元格，并将它们全部转换为原型。原型单元格，顾名思义，是使用您要显示的文本样式、颜色、图像或其他属性进行配置，并在运行时从数据源获取其数据的单元格。数据源会为每一行载入一个原型单元格，然后配置该单元格来显示该行的数据。
</p><p class="para">
  要载入正确的单元格，数据源需要知道单元格的名称，并且该名称也必须在串联图中进行配置。 
</p><p class="para">
  设定原型单元格名称时，也将配置另一个属性—单元格选择样式，该样式用于确定用户轻按单元格时单元格的外观。将单元格选择样式设定为“None”，使用户轻按单元格时单元格不会高亮显示。这是当用户轻按待办事项列表中的项目，将其标记为已完成或未完成时，您想要单元格呈现的行为。稍后会在本教程中实现该功能。
</p><p class="para">
  <strong class="inline-head">配置原型单元格</strong>
</p><ol class="list-number">
  <li class="item"><p class="para">
  在表格中选择第一个表格视图单元格。
</p>
</li><li class="item"><p class="para">
  在“Attributes”检查器中，找到“Identifier”栏并键入 <code class="code-voice">ListPrototypeCell</code>。
</p>
</li><li class="item"><p class="para">
  在“Attributes”检查器中，找到“Selection”栏并选取“None”。
</p>
</li>
</ol><p class="para">
  您也可以更改原型单元格的字体或其他属性。基本配置很容易完成，您可以轻松记下。
</p><p class="para">
  下一步是实现 <code class="code-voice">tableView:cellForRowAtIndexPath:</code> 方法，让数据源为给定行配置单元格。表格视图在想要显示给定行时会调用此数据源方法。对于行数较少的表格视图，所有行可能会同时出现在屏幕上，所以表格中的每一行都会调用此方法。但是，行数很多的表格视图在给定时间内只会显示全部项目中的一小部分。最有效的方式是让表格视图仅请求要显示行的单元格，而这一点可通过 <code class="code-voice">tableView:cellForRowAtIndexPath:</code> 让表格视图实现。
</p><p class="para">
  对于表格中的任何给定行，取回 <code class="code-voice">toDoItems</code> 数组中的相应条目，然后将单元格的文本标签设定为项目的名称。
</p><p class="para">
  <strong class="inline-head">在表格中显示单元格</strong>
</p><ol class="list-number">
  <li class="item"><p class="para">
  在项目导航器中，选择 <code class="code-voice">XYZToDoListViewController.m</code>。
</p>
</li><li class="item"><p class="para">
  找到 <code class="code-voice">tableView:cellForRowAtIndexPath:</code> 数据源方法。模板实现是这样的：
</p>
<section class="code-listing">
  
  <span class="caption"></span>
  <div class="code-sample">
    <ol class="code-lines">
        <li><code class="code-voice"><span class="o">-</span> <span class="p">(</span><span class="n">UITableViewCell</span> <span class="o">*</span><span class="p">)</span><span class="nl">tableView:</span><span class="p">(</span><span class="n">UITableView</span> <span class="o">*</span><span class="p">)</span><span class="n">tableView</span> <span class="nl">cellForRowAtIndexPath:</span><span class="p">(</span><span class="n">NSIndexPath</span> <span class="o">*</span><span class="p">)</span><span class="n">indexPath</span>
</code></li>
        <li><code class="code-voice"><span class="p">{</span>
</code></li>
        <li><code class="code-voice">    <span class="k">static</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">CellIdentifier</span> <span class="o">=</span> <span class="s">@&quot;Cell&quot;</span><span class="p">;</span>
</code></li>
        <li><code class="code-voice">    <span class="n">UITableViewCell</span> <span class="o">*</span><span class="n">cell</span> <span class="o">=</span> <span class="p">[</span><span class="n">tableView</span> <span class="nl">dequeueReusableCellWithIdentifier:</span><span class="n">CellIdentifier</span> <span class="nl">forIndexPath:</span><span class="n">indexPath</span><span class="p">];</span>
</code></li>
        <li><code class="code-voice"> 
</code></li>
        <li><code class="code-voice">    <span class="c1">// Configure the cell...</span>
</code></li>
        <li><code class="code-voice"> 
</code></li>
        <li><code class="code-voice">    <span class="k">return</span> <span class="n">cell</span><span class="p">;</span>
</code></li>
        <li><code class="code-voice"><span class="p">}</span>
</code></li>
    </ol>
  </div>
</section>
<p class="para">
  该模板执行多个任务。它会创建一个变量来保存单元格的标识符，向表格视图请求具有该标识符的单元格，添加一个注释注明配置该单元格的代码应该写在哪里，然后返回该单元格。
</p>
<p class="para">
  要让此代码为您的应用程序所用，需要将标识符更改为您在串联图中设定的标识符，然后添加代码来配置该单元格。
</p>
</li><li class="item"><p class="para">
  将单元格标识符更改为您在串联图中设定的标识符。为了避免拼写错误，请将串联图中的标识符拷贝并粘贴到实现文件中。该单元格标识符行现在应该是这样的：
</p>
<section class="code-listing">
  
  <span class="caption"></span>
  <div class="code-sample">
    <ol class="code-lines">
        <li><code class="code-voice"><span class="k">static</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">CellIdentifier</span> <span class="o">=</span> <span class="s">@&quot;ListPrototypeCell&quot;</span><span class="p">;</span>
</code></li>
    </ol>
  </div>
</section>
</li><li class="item"><p class="para">
  在 return 语句前，添加以下代码行：
</p>
<section class="code-listing">
  
  <span class="caption"></span>
  <div class="code-sample">
    <ol class="code-lines">
        <li><code class="code-voice"><span class="n">XYZToDoItem</span> <span class="o">*</span><span class="n">toDoItem</span> <span class="o">=</span> <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">toDoItems</span> <span class="nl">objectAtIndex:</span><span class="n">indexPath</span><span class="p">.</span><span class="n">row</span><span class="p">];</span>
</code></li>
        <li><code class="code-voice"><span class="n">cell</span><span class="p">.</span><span class="n">textLabel</span><span class="p">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">toDoItem</span><span class="p">.</span><span class="n">itemName</span><span class="p">;</span>
</code></li>
    </ol>
  </div>
</section>
</li>
</ol><p class="para">
  您的 <code class="code-voice">tableView:cellForRowAtIndexPath:</code> 方法应如下图所示：
</p><section class="code-listing">
  
  <span class="caption"></span>
  <div class="code-sample">
    <ol class="code-lines">
        <li><code class="code-voice"><span class="o">-</span> <span class="p">(</span><span class="n">UITableViewCell</span> <span class="o">*</span><span class="p">)</span><span class="nl">tableView:</span><span class="p">(</span><span class="n">UITableView</span> <span class="o">*</span><span class="p">)</span><span class="n">tableView</span> <span class="nl">cellForRowAtIndexPath:</span><span class="p">(</span><span class="n">NSIndexPath</span> <span class="o">*</span><span class="p">)</span><span class="n">indexPath</span>
</code></li>
        <li><code class="code-voice"><span class="p">{</span>
</code></li>
        <li><code class="code-voice">    <span class="k">static</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">CellIdentifier</span> <span class="o">=</span> <span class="s">@&quot;ListPrototypeCell&quot;</span><span class="p">;</span>
</code></li>
        <li><code class="code-voice">    <span class="n">UITableViewCell</span> <span class="o">*</span><span class="n">cell</span> <span class="o">=</span> <span class="p">[</span><span class="n">tableView</span> <span class="nl">dequeueReusableCellWithIdentifier:</span><span class="n">CellIdentifier</span> <span class="nl">forIndexPath:</span><span class="n">indexPath</span><span class="p">];</span>
</code></li>
        <li><code class="code-voice">    <span class="n">XYZToDoItem</span> <span class="o">*</span><span class="n">toDoItem</span> <span class="o">=</span> <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">toDoItems</span> <span class="nl">objectAtIndex:</span><span class="n">indexPath</span><span class="p">.</span><span class="n">row</span><span class="p">];</span>
</code></li>
        <li><code class="code-voice">    <span class="n">cell</span><span class="p">.</span><span class="n">textLabel</span><span class="p">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">toDoItem</span><span class="p">.</span><span class="n">itemName</span><span class="p">;</span>
</code></li>
        <li><code class="code-voice">    <span class="k">return</span> <span class="n">cell</span><span class="p">;</span>
</code></li>
        <li><code class="code-voice"><span class="p">}</span>
</code></li>
    </ol>
  </div>
</section><p class="para">
  <em>检查点：</em>运行您的应用程序。您在 <code class="code-voice">loadInitialData</code> 中添加的项目列表应该在表格视图中显示为单元格。
</p>
  
</section>
<section class="section">
  <a name="//apple_ref/doc/uid/TP40012668-CH10-SW5"></a>
  <h3 class="section-name" tabindex="0">将项目标记为已完成</h3>
  <p class="para">
  如果无法将待办事项列表中的项目标记为已完成，那么这个待办事项列表还不够好。现在，让我们来添加这样的支持。一个简单的界面应该可以在用户轻按单元格时切换完成状态，并在已完成的项目旁边显示勾号。幸运的是，表格视图附带了一些内建行为，您可以利用这些行为来实现这样的简单界面。需要注意的是，在用户轻按单元格时，表格视图要通知它们的委托。所以我们的任务是写一段代码，对用户轻按表格中的待办事项这个操作作出响应。
</p><p class="para">
  您在串联图中配置 <code class="code-voice">XYZToDoListViewController</code> 时，Xcode 就已经让它成为表格视图的委托了。您要做的只是实现 <code class="code-voice">tableView:didSelectRowAtIndexPath:</code> 委托方法，使其响应用户轻按，并在适当时候更新您的待办事项列表。
</p><p class="para">
  选定单元格后，表格视图会调用 <code class="code-voice">tableView:didSelectRowAtIndexPath:</code> 委托方法，来查看它应如何处理选择操作。在此方法中，您需要编写代码来更新待办项目的完成状态。
</p><p class="para">
  <strong class="inline-head">将项目标记为已完成或未完成</strong>
</p><ol class="list-number">
  <li class="item"><p class="para">
  在项目导航器中，选择 <code class="code-voice">XYZToDoListViewController.m</code>。
</p>
</li><li class="item"><p class="para">
  将以下代码行添加到文件末尾，在 <code class="code-voice">@end</code> 行正上方：
</p>
<section class="code-listing">
  
  <span class="caption"></span>
  <div class="code-sample">
    <ol class="code-lines">
        <li><code class="code-voice"><span class="cp">#pragma mark - Table view delegate</span>
</code></li>
        <li><code class="code-voice"> 
</code></li>
        <li><code class="code-voice"><span class="o">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nl">tableView:</span><span class="p">(</span><span class="n">UITableView</span> <span class="o">*</span><span class="p">)</span><span class="n">tableView</span> <span class="nl">didSelectRowAtIndexPath:</span><span class="p">(</span><span class="n">NSIndexPath</span> <span class="o">*</span><span class="p">)</span><span class="n">indexPath</span>
</code></li>
        <li><code class="code-voice"><span class="p">{</span>
</code></li>
        <li><code class="code-voice"> 
</code></li>
        <li><code class="code-voice"><span class="p">}</span>
</code></li>
    </ol>
  </div>
</section>
<p class="para">
  请试着键入第二行，而不是拷贝和粘贴。您将发现<strong>代码补全</strong>是 Xcode 最节省时间的功能之一。当 Xcode 显示出可能的补全建议列表时，请滚动浏览列表，找到想要的建议，然后按下 Return 键。Xcode 会为您插入整行。
</p>
</li><li class="item"><p class="para">
  您想要响应轻按，但并不想让单元格保持选定状态。添加以下代码，让单元格在选定后立即取消选定：
</p>
<section class="code-listing">
  
  <span class="caption"></span>
  <div class="code-sample">
    <ol class="code-lines">
        <li><code class="code-voice"><span class="p">[</span><span class="n">tableView</span> <span class="nl">deselectRowAtIndexPath:</span><span class="n">indexPath</span> <span class="nl">animated:</span><span class="n">NO</span><span class="p">];</span>
</code></li>
    </ol>
  </div>
</section>
</li><li class="item"><p class="para">
  在 <code class="code-voice">toDoItems</code> 数组中搜索相应的 <code class="code-voice">XYZToDoItem</code>。
</p>
<section class="code-listing">
  
  <span class="caption"></span>
  <div class="code-sample">
    <ol class="code-lines">
        <li><code class="code-voice"><span class="n">XYZToDoItem</span> <span class="o">*</span><span class="n">tappedItem</span> <span class="o">=</span> <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">toDoItems</span> <span class="nl">objectAtIndex:</span><span class="n">indexPath</span><span class="p">.</span><span class="n">row</span><span class="p">];</span>
</code></li>
    </ol>
  </div>
</section>
</li><li class="item"><p class="para">
  切换被轻按项目的完成状态。
</p>
<section class="code-listing">
  
  <span class="caption"></span>
  <div class="code-sample">
    <ol class="code-lines">
        <li><code class="code-voice"><span class="n">tappedItem</span><span class="p">.</span><span class="n">completed</span> <span class="o">=</span> <span class="o">!</span><span class="n">tappedItem</span><span class="p">.</span><span class="n">completed</span><span class="p">;</span>
</code></li>
    </ol>
  </div>
</section>
</li><li class="item"><p class="para">
  告诉表格视图重新载入您刚更新过数据的行。
</p>
<section class="code-listing">
  
  <span class="caption"></span>
  <div class="code-sample">
    <ol class="code-lines">
        <li><code class="code-voice"><span class="p">[</span><span class="n">tableView</span> <span class="nl">reloadRowsAtIndexPaths:</span><span class="err">@</span><span class="p">[</span><span class="n">indexPath</span><span class="p">]</span> <span class="nl">withRowAnimation:</span><span class="n">UITableViewRowAnimationNone</span><span class="p">];</span>
</code></li>
    </ol>
  </div>
</section>
</li>
</ol><p class="para">
  您的 <code class="code-voice">tableView:didSelectRowAtIndexPath:</code> 方法应如下图所示：
</p><section class="code-listing">
  
  <span class="caption"></span>
  <div class="code-sample">
    <ol class="code-lines">
        <li><code class="code-voice"><span class="o">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nl">tableView:</span><span class="p">(</span><span class="n">UITableView</span> <span class="o">*</span><span class="p">)</span><span class="n">tableView</span> <span class="nl">didSelectRowAtIndexPath:</span><span class="p">(</span><span class="n">NSIndexPath</span> <span class="o">*</span><span class="p">)</span><span class="n">indexPath</span>
</code></li>
        <li><code class="code-voice"><span class="p">{</span>
</code></li>
        <li><code class="code-voice">    <span class="p">[</span><span class="n">tableView</span> <span class="nl">deselectRowAtIndexPath:</span><span class="n">indexPath</span> <span class="nl">animated:</span><span class="n">NO</span><span class="p">];</span>
</code></li>
        <li><code class="code-voice">    <span class="n">XYZToDoItem</span> <span class="o">*</span><span class="n">tappedItem</span> <span class="o">=</span> <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">toDoItems</span> <span class="nl">objectAtIndex:</span><span class="n">indexPath</span><span class="p">.</span><span class="n">row</span><span class="p">];</span>
</code></li>
        <li><code class="code-voice">    <span class="n">tappedItem</span><span class="p">.</span><span class="n">completed</span> <span class="o">=</span> <span class="o">!</span><span class="n">tappedItem</span><span class="p">.</span><span class="n">completed</span><span class="p">;</span>
</code></li>
        <li><code class="code-voice">    <span class="p">[</span><span class="n">tableView</span> <span class="nl">reloadRowsAtIndexPaths:</span><span class="err">@</span><span class="p">[</span><span class="n">indexPath</span><span class="p">]</span> <span class="nl">withRowAnimation:</span><span class="n">UITableViewRowAnimationNone</span><span class="p">];</span>
</code></li>
        <li><code class="code-voice"><span class="p">}</span>
</code></li>
    </ol>
  </div>
</section><p class="para">
  <em>检查点：</em>运行您的应用程序。您在 <code class="code-voice">loadInitialData</code> 中添加的项目列表在表格视图中显示为单元格。但当您轻按项目时，并没有任何反应。为什么呢？
</p><p class="para">
  原因是您尚未配置显示项目完成状态的表格视图单元格。要实现此功能，您需要回到 <code class="code-voice">tableView:cellForRowAtIndexPath:</code> 方法，并配置单元格以在项目完成时显示指示。
</p><p class="para">
  指示项目已完成的一种方式是在其旁边放置一个勾号。幸运的是，表格视图右边可以有一个单元格附属物。默认情况下，单元格中没有任何附属物；不过您可以进行更改，使其显示不同的附属物。其中的一个附属物就是勾号。您要做的是根据待办事项的完成状态，设定单元格的附属物。
</p><p class="para">
  <strong class="inline-head">显示项目的完成状态</strong>
</p><ol class="list-number">
  <li class="item"><p class="para">
  前往 <code class="code-voice">tableView:cellForRowAtIndexPath:</code> 方法。
</p>
</li><li class="item"><p class="para">
  在设定单元格的文本标签的代码行下方添加以下代码：
</p>
<section class="code-listing">
  
  <span class="caption"></span>
  <div class="code-sample">
    <ol class="code-lines">
        <li><code class="code-voice"><span class="k">if</span> <span class="p">(</span><span class="n">toDoItem</span><span class="p">.</span><span class="n">completed</span><span class="p">)</span> <span class="p">{</span>
</code></li>
        <li><code class="code-voice">    <span class="n">cell</span><span class="p">.</span><span class="n">accessoryType</span> <span class="o">=</span> <span class="n">UITableViewCellAccessoryCheckmark</span><span class="p">;</span>
</code></li>
        <li><code class="code-voice"><span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</code></li>
        <li><code class="code-voice">    <span class="n">cell</span><span class="p">.</span><span class="n">accessoryType</span> <span class="o">=</span> <span class="n">UITableViewCellAccessoryNone</span><span class="p">;</span>
</code></li>
        <li><code class="code-voice"><span class="p">}</span>
</code></li>
    </ol>
  </div>
</section>
</li>
</ol><p class="para">
  您的 <code class="code-voice">tableView:cellForRowAtIndexPath:</code> 方法现在应如下图所示：
</p><section class="code-listing">
  
  <span class="caption"></span>
  <div class="code-sample">
    <ol class="code-lines">
        <li><code class="code-voice"><span class="o">-</span> <span class="p">(</span><span class="n">UITableViewCell</span> <span class="o">*</span><span class="p">)</span><span class="nl">tableView:</span><span class="p">(</span><span class="n">UITableView</span> <span class="o">*</span><span class="p">)</span><span class="n">tableView</span> <span class="nl">cellForRowAtIndexPath:</span><span class="p">(</span><span class="n">NSIndexPath</span> <span class="o">*</span><span class="p">)</span><span class="n">indexPath</span>
</code></li>
        <li><code class="code-voice"><span class="p">{</span>
</code></li>
        <li><code class="code-voice">    <span class="k">static</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">CellIdentifier</span> <span class="o">=</span> <span class="s">@&quot;ListPrototypeCell&quot;</span><span class="p">;</span>
</code></li>
        <li><code class="code-voice">    <span class="n">UITableViewCell</span> <span class="o">*</span><span class="n">cell</span> <span class="o">=</span> <span class="p">[</span><span class="n">tableView</span> <span class="nl">dequeueReusableCellWithIdentifier:</span><span class="n">CellIdentifier</span> <span class="nl">forIndexPath:</span><span class="n">indexPath</span><span class="p">];</span>
</code></li>
        <li><code class="code-voice">    <span class="n">XYZToDoItem</span> <span class="o">*</span><span class="n">toDoItem</span> <span class="o">=</span> <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">toDoItems</span> <span class="nl">objectAtIndex:</span><span class="n">indexPath</span><span class="p">.</span><span class="n">row</span><span class="p">];</span>
</code></li>
        <li><code class="code-voice">    <span class="n">cell</span><span class="p">.</span><span class="n">textLabel</span><span class="p">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">toDoItem</span><span class="p">.</span><span class="n">itemName</span><span class="p">;</span>
</code></li>
        <li><code class="code-voice">    <span class="k">if</span> <span class="p">(</span><span class="n">toDoItem</span><span class="p">.</span><span class="n">completed</span><span class="p">)</span> <span class="p">{</span>
</code></li>
        <li><code class="code-voice">        <span class="n">cell</span><span class="p">.</span><span class="n">accessoryType</span> <span class="o">=</span> <span class="n">UITableViewCellAccessoryCheckmark</span><span class="p">;</span>
</code></li>
        <li><code class="code-voice">    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</code></li>
        <li><code class="code-voice">        <span class="n">cell</span><span class="p">.</span><span class="n">accessoryType</span> <span class="o">=</span> <span class="n">UITableViewCellAccessoryNone</span><span class="p">;</span>
</code></li>
        <li><code class="code-voice">    <span class="p">}</span>
</code></li>
        <li><code class="code-voice">    <span class="k">return</span> <span class="n">cell</span><span class="p">;</span>
</code></li>
        <li><code class="code-voice"><span class="p">}</span>
</code></li>
    </ol>
  </div>
</section><p class="para">
  <em>检查点：</em>运行应用程序。您在 <code class="code-voice">loadInitialData</code> 中添加的项目列表在表格视图中显示为单元格。轻按项目时，其旁边应该出现一个勾号。如果您再次轻按同一项目，勾号会消失。
</p>
  
</section>
<section class="section">
  <a name="//apple_ref/doc/uid/TP40012668-CH10-SW6"></a>
  <h3 class="section-name" tabindex="0">添加新项目</h3>
  <p class="para">
  构建待办事项列表应用程序功能的最后一步是实现添加项目的能力。当用户在 <code class="code-voice">XYZAddToDoItemViewController</code> 场景的文本栏中输入项目名称，并轻按“Done”按钮时，您想要视图控制器创建一个新的列表项目并将其传递回 <code class="code-voice">XYZToDoListViewController</code>，以显示在待办事项列表中。
</p><p class="para">
  首先，您需要拥有一个列表项目来进行配置。就像表格视图那样，视图控制器是将界面连接到模型的逻辑位置。为 <code class="code-voice">XYZAddToDoItemViewController</code> 添加一个属性来保存新的待办事项。
</p><p class="para">
  <strong class="inline-head">将 XYZToDoItem 添加到 XYZAddToDoItemViewController 类</strong>
</p><ol class="list-number">
  <li class="item"><p class="para">
  在项目导航器中，选择 <code class="code-voice">XYZAddToDoItemViewController.h</code>。
</p>
<p class="para">
  由于稍后需要从表格视图控制器访问列表项目，所以务必将其设为公共属性。这就是为什么要在接口文件 <code class="code-voice">XYZAddToDoItemViewController.h</code> 中声明它，而不在实现文件 <code class="code-voice">XYZAddToDoItemViewController.m</code> 中声明的原因所在。
</p>
</li><li class="item"><p class="para">
  将 import 声明添加到 <code class="code-voice">@interface</code> 行上方的 <code class="code-voice">XYZToDoItem</code> 类中。
</p>
<section class="code-listing">
  
  <span class="caption"></span>
  <div class="code-sample">
    <ol class="code-lines">
        <li><code class="code-voice"><span class="cp">#import &quot;XYZToDoItem.h&quot;</span>
</code></li>
    </ol>
  </div>
</section>
</li><li class="item"><p class="para">
  将 <code class="code-voice">toDoItem</code> 属性添加到该接口。
</p>
<section class="code-listing">
  
  <span class="caption"></span>
  <div class="code-sample">
    <ol class="code-lines">
        <li><code class="code-voice"><span class="k">@interface</span> <span class="nc">XYZAddToDoItemViewController</span> : <span class="nc">UIViewController</span>
</code></li>
        <li><code class="code-voice"> 
</code></li>
        <li><code class="code-voice"><span class="k">@property</span> <span class="n">XYZToDoItem</span> <span class="o">*</span><span class="n">toDoItem</span><span class="p">;</span>
</code></li>
        <li><code class="code-voice"> 
</code></li>
        <li><code class="code-voice"><span class="k">@end</span>
</code></li>
    </ol>
  </div>
</section>
</li>
</ol><p class="para">
  要获得新项目的名称，视图控制器需要访问用户输入名称的文本栏。要实现此功能，请创建从 <code class="code-voice">XYZAddToDoItemViewController</code> 类到串联图中的文本栏的连接。
</p><p class="para">
  <strong class="inline-head">将文本栏连接到视图控制器</strong>
</p><ol class="list-number">
  <li class="item"><p class="para">
  在大纲视图中，选择 <code class="code-voice">XYZAddToDoItemViewController</code> 对象。
</p>
</li><li class="item"><p class="para">
  点按窗口工具栏右上角的“Assistant”按钮，打开辅助编辑器。 
</p>
<figure class="figure">
  
  <span class="caption"></span>
  <img src="art/assistant_editor_2x.png" alt="image: ../Art/assistant_editor_2x.png" width="334" height="115" />
</figure><p class="para">
  右边的编辑器出现时，应该显示有 <code class="code-voice">XYZAddToDoItemViewController.m</code>。如果未显示，请点按右边的编辑器中的文件名，并选取 <code class="code-voice">XYZAddToDoItemViewController.m</code>。
</p>
<p class="para">
  辅助编辑器可让您一次打开两个文件，以便能够在它们之间执行操作。例如，在源文件中键入一个属性，而源文件的对象又在接口文件中。
</p>
</li><li class="item"><p class="para">
  在串联图中选择文本栏。 
</p>
</li><li class="item"><p class="para">
  按住 Control 键从画布上的文本栏拖到右边编辑器中的代码显示窗口，到达 <code class="code-voice">XYZAddToDoItemViewController.m</code> 中的 <code class="code-voice">@interface</code> 行正下方时停止拖移。
</p>
<figure class="figure">
  
  <span class="caption"></span>
  <img src="art/assistant_editor_drag_2x.png" alt="image: ../Art/assistant_editor_drag_2x.png" width="600" height="614" />
</figure></li><li class="item"><p class="para">
  在出现的对话框中，为“Name”栏键入“<code class="code-voice">textField</code>”。
</p>
<p class="para">
  让选项的其余部分保持不变。您的对话框应如下图所示：
</p>
<figure class="figure">
  
  <span class="caption"></span>
  <img src="art/configure_text_field_outlet_2x.png" alt="image: ../Art/configure_text_field_outlet.pdf" width="597" height="210" />
</figure></li><li class="item"><p class="para">
  点按“Connect”。 
</p>
<p class="para">
  Xcode 会将必要的代码添加到 <code class="code-voice">XYZAddToDoItemViewController.m</code>，用于储存指向文本栏的指针，并配置串联图来设置该连接。
</p>
</li>
</ol><p class="para">
  另外，您需要知道何时创建项目。如果想要仅在“Done”按钮被轻按时才创建项目，那么请将“Done”按钮添加为 Outlet。
</p><p class="para">
  <strong class="inline-head">将“Done”按钮连接到视图控制器</strong>
</p><ol class="list-number">
  <li class="item"><p class="para">
  在串联图中，打开辅助编辑器，将最右边的窗口设定为 <code class="code-voice">XYZAddToDoItemViewController.m</code>。
</p>
</li><li class="item"><p class="para">
  在串联图中选择“Done”按钮。 
</p>
</li><li class="item"><p class="para">
  按住 Control 键从画布上的“Done”按钮拖到右边的编辑器中的代码显示窗口，到达 <code class="code-voice">XYZAddToDoItemViewController.m</code> 中的 <code class="code-voice">textField</code> 属性正下方的行时停止拖移。
</p>
</li><li class="item"><p class="para">
  在出现的对话框中，在“Name”栏键入“<code class="code-voice">doneButton</code>”。
</p>
<p class="para">
  保持选项的其余部分不变。对话框应如下图所示：
</p>
<figure class="figure">
  
  <span class="caption"></span>
  <img src="art/configure_done_button_outlet_2x.png" alt="image: ../Art/configure_done_button_outlet_2x.png" width="599" height="246" />
</figure></li><li class="item"><p class="para">
  点按“Connect”。
</p>
</li>
</ol><p class="para">
  您现在有了识别“Done”按钮的方式。由于想在轻按“Done”按钮时创建一个项目，所以需要知道该按钮何时被按下。
</p><p class="para">
  当用户轻按“Done”按钮时，它会启动一个 unwind segue，返回到待办事项列表，这正是您在第二个教程中配置的接口。在 segue 执行前，系统通过调用 <code class="code-voice">prepareForSegue:</code>，给所包含的视图控制器一次准备机会。这便是检查用户是否轻按了“Done”按钮的时候。如果是，将会创建一个新的待办事项。您可以检查轻按了哪一个按钮，如果是“Done”按钮，将会创建项目。
</p><p class="para">
  <strong class="inline-head">轻按“Done”按钮后创建项目</strong>
</p><ol class="list-number">
  <li class="item"><p class="para">
  在项目导航器中选择 <code class="code-voice">XYZAddToDoItemViewController.m</code>。
</p>
</li><li class="item"><p class="para">
  在 <code class="code-voice">@implementation</code> 行下方添加 <code class="code-voice">prepareForSegue:</code> 方法：
</p>
<section class="code-listing">
  
  <span class="caption"></span>
  <div class="code-sample">
    <ol class="code-lines">
        <li><code class="code-voice"><span class="o">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="nl">prepareForSegue:</span><span class="p">(</span><span class="n">UIStoryboardSegue</span> <span class="o">*</span><span class="p">)</span><span class="n">segue</span> <span class="nl">sender:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="n">sender</span>
</code></li>
        <li><code class="code-voice"><span class="p">{</span>
</code></li>
        <li><code class="code-voice"><span class="p">}</span>
</code></li>
    </ol>
  </div>
</section>
</li><li class="item"><p class="para">
  在此方法中，请查看“Done”按钮是否按下。
</p>
<p class="para">
  如果未按下就不存储项目，而是让方法返回但不执行任何其他操作。
</p>
<section class="code-listing">
  
  <span class="caption"></span>
  <div class="code-sample">
    <ol class="code-lines">
        <li><code class="code-voice"><span class="k">if</span> <span class="p">(</span><span class="n">sender</span> <span class="o">!=</span> <span class="n">self</span><span class="p">.</span><span class="n">doneButton</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
</code></li>
    </ol>
  </div>
</section>
</li><li class="item"><p class="para">
  查看一下文本栏中是否有文本。
</p>
<section class="code-listing">
  
  <span class="caption"></span>
  <div class="code-sample">
    <ol class="code-lines">
        <li><code class="code-voice"><span class="k">if</span> <span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">textField</span><span class="p">.</span><span class="n">text</span><span class="p">.</span><span class="n">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</code></li>
        <li><code class="code-voice"><span class="p">}</span>
</code></li>
    </ol>
  </div>
</section>
</li><li class="item"><p class="para">
  如果有文本，将会创建一个新项目，并用文本栏中的文本为其命名。另外，请确保完成状态被设定为“<code class="code-voice">NO</code>”。
</p>
<section class="code-listing">
  
  <span class="caption"></span>
  <div class="code-sample">
    <ol class="code-lines">
        <li><code class="code-voice"><span class="n">self</span><span class="p">.</span><span class="n">toDoItem</span> <span class="o">=</span> <span class="p">[[</span><span class="n">XYZToDoItem</span> <span class="n">alloc</span><span class="p">]</span> <span class="n">init</span><span class="p">];</span>
</code></li>
        <li><code class="code-voice"><span class="n">self</span><span class="p">.</span><span class="n">toDoItem</span><span class="p">.</span><span class="n">itemName</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">textField</span><span class="p">.</span><span class="n">text</span><span class="p">;</span>
</code></li>
        <li><code class="code-voice"><span class="n">self</span><span class="p">.</span><span class="n">toDoItem</span><span class="p">.</span><span class="n">completed</span> <span class="o">=</span> <span class="n">NO</span><span class="p">;</span>
</code></li>
    </ol>
  </div>
</section>
<p class="para">
  如果没有文本，您就不需要存储项目，也不需要执行任何其他操作。
</p>
</li>
</ol><p class="para">
  您的 <code class="code-voice">prepareForSegue:</code> 方法应如下图所示：
</p><section class="code-listing">
  
  <span class="caption"></span>
  <div class="code-sample">
    <ol class="code-lines">
        <li><code class="code-voice"><span class="o">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="nl">prepareForSegue:</span><span class="p">(</span><span class="n">UIStoryboardSegue</span> <span class="o">*</span><span class="p">)</span><span class="n">segue</span> <span class="nl">sender:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="n">sender</span>
</code></li>
        <li><code class="code-voice"><span class="p">{</span>
</code></li>
        <li><code class="code-voice">    <span class="k">if</span> <span class="p">(</span><span class="n">sender</span> <span class="o">!=</span> <span class="n">self</span><span class="p">.</span><span class="n">doneButton</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
</code></li>
        <li><code class="code-voice">    <span class="k">if</span> <span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">textField</span><span class="p">.</span><span class="n">text</span><span class="p">.</span><span class="n">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</code></li>
        <li><code class="code-voice">        <span class="n">self</span><span class="p">.</span><span class="n">toDoItem</span> <span class="o">=</span> <span class="p">[[</span><span class="n">XYZToDoItem</span> <span class="n">alloc</span><span class="p">]</span> <span class="n">init</span><span class="p">];</span>
</code></li>
        <li><code class="code-voice">        <span class="n">self</span><span class="p">.</span><span class="n">toDoItem</span><span class="p">.</span><span class="n">itemName</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">textField</span><span class="p">.</span><span class="n">text</span><span class="p">;</span>
</code></li>
        <li><code class="code-voice">        <span class="n">self</span><span class="p">.</span><span class="n">toDoItem</span><span class="p">.</span><span class="n">completed</span> <span class="o">=</span> <span class="n">NO</span><span class="p">;</span>
</code></li>
        <li><code class="code-voice">    <span class="p">}</span>
</code></li>
        <li><code class="code-voice"><span class="p">}</span>
</code></li>
    </ol>
  </div>
</section><p class="para">
  既然创建了一个新项目，那么就需要将该项目传递回 <code class="code-voice">XYZToDoListViewController</code>，以便它可以将项目添加到待办事项列表。要完成此功能，请重新访问您在第二个教程中编写的 <code class="code-voice">unwindToList:</code> 方法。当用户轻按“Cancel”或“Done”按钮，<code class="code-voice">XYZAddToDoItemViewController</code> 场景会在关闭时调用该方法。
</p><p class="para">
  就像作为 unwind segue 目标的所有方法一样，<code class="code-voice">unwindToList:</code> 方法也采用 segue 作为参数。segue 参数是从 <code class="code-voice">XYZAddToDoItemViewController</code> 展开并返回到 <code class="code-voice">XYZToDoListViewController</code> 的过渡。由于 segue 是两个视图控制器之间的过渡，所以知道它的源视图控制器是 <code class="code-voice">XYZAddToDoItemViewController</code>。通过向 segue 对象请求其源视图控制器，您可以用 <code class="code-voice">unwindToList:</code> 方法访问储存在源视图控制器中的任何数据。目前，您想要访问 <code class="code-voice">toDoItem</code>。如果它是 <code class="code-voice">nil</code>，则该项目并未创建。原因可能是文本栏没有文本，或者是用户轻按了“Cancel”按钮。如果 <code class="code-voice">toDoItem</code> 有值，则可以取回该项目，再添加到 <code class="code-voice">toDoItems</code> 数组，并通过重新载入表格视图中的数据将其显示在待办事项列表中。
</p><p class="para">
  <strong class="inline-head">储存并显示新项目</strong>
</p><ol class="list-number">
  <li class="item"><p class="para">
  在项目导航器中，选择 <code class="code-voice">XYZToDoListViewController.m</code>。
</p>
</li><li class="item"><p class="para">
  将 import 声明添加到 <code class="code-voice">@interface</code> 行上方的 <code class="code-voice">XYZAddToDoItemViewController</code> 类中。
</p>
<section class="code-listing">
  
  <span class="caption"></span>
  <div class="code-sample">
    <ol class="code-lines">
        <li><code class="code-voice"><span class="cp">#import &quot;XYZAddToDoItemViewController.h&quot;</span>
</code></li>
    </ol>
  </div>
</section>
</li><li class="item"><p class="para">
  找到您在第二个教程中添加的 <code class="code-voice">unwindToList:</code> 方法。
</p>
</li><li class="item"><p class="para">
  在此方法中，取回源视图控制器 <code class="code-voice">XYZAddToDoItemViewController</code>，即您要展开的控制器。
</p>
<section class="code-listing">
  
  <span class="caption"></span>
  <div class="code-sample">
    <ol class="code-lines">
        <li><code class="code-voice"><span class="n">XYZAddToDoItemViewController</span> <span class="o">*</span><span class="n">source</span> <span class="o">=</span> <span class="p">[</span><span class="n">segue</span> <span class="n">sourceViewController</span><span class="p">];</span>
</code></li>
    </ol>
  </div>
</section>
</li><li class="item"><p class="para">
  取回控制器的待办事项。 
</p>
<section class="code-listing">
  
  <span class="caption"></span>
  <div class="code-sample">
    <ol class="code-lines">
        <li><code class="code-voice"><span class="n">XYZToDoItem</span> <span class="o">*</span><span class="n">item</span> <span class="o">=</span> <span class="n">source</span><span class="p">.</span><span class="n">toDoItem</span><span class="p">;</span>
</code></li>
    </ol>
  </div>
</section>
<p class="para">
  这就是轻按“Done”按钮时创建的项目。
</p>
</li><li class="item"><p class="para">
  看看这个项目是否存在。 
</p>
<section class="code-listing">
  
  <span class="caption"></span>
  <div class="code-sample">
    <ol class="code-lines">
        <li><code class="code-voice"><span class="k">if</span> <span class="p">(</span><span class="n">item</span> <span class="o">!=</span> <span class="nb">nil</span><span class="p">)</span> <span class="p">{</span>
</code></li>
        <li><code class="code-voice"><span class="p">}</span>
</code></li>
    </ol>
  </div>
</section>
<p class="para">
  如果是 <code class="code-voice">nil</code>，可能是“Cancel”按钮关闭了屏幕，或者是文本栏中没有文本，因此不必存储该项目。
</p>
<p class="para">
  如果项目存在，请添加到 <code class="code-voice">toDoItems</code> 数组。
</p>
<section class="code-listing">
  
  <span class="caption"></span>
  <div class="code-sample">
    <ol class="code-lines">
        <li><code class="code-voice"><span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">toDoItems</span> <span class="nl">addObject:</span><span class="n">item</span><span class="p">];</span>
</code></li>
    </ol>
  </div>
</section>
</li><li class="item"><p class="para">
  重新载入表格中的数据。 
</p>
<p class="para">
  因为表格视图不会跟踪其数据，所以数据源（在这个程序中是表格视图控制器）有责任通知表格视图何时有新数据供其显示。
</p>
<section class="code-listing">
  
  <span class="caption"></span>
  <div class="code-sample">
    <ol class="code-lines">
        <li><code class="code-voice"><span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">tableView</span> <span class="n">reloadData</span><span class="p">];</span>
</code></li>
    </ol>
  </div>
</section>
</li>
</ol><p class="para">
  您的 <code class="code-voice">unwindToList:</code> 方法应如下图所示：
</p><section class="code-listing">
  
  <span class="caption"></span>
  <div class="code-sample">
    <ol class="code-lines">
        <li><code class="code-voice"><span class="o">-</span> <span class="p">(</span><span class="kt">IBAction</span><span class="p">)</span><span class="nl">unwindToList:</span><span class="p">(</span><span class="n">UIStoryboardSegue</span> <span class="o">*</span><span class="p">)</span><span class="n">segue</span>
</code></li>
        <li><code class="code-voice"><span class="p">{</span>
</code></li>
        <li><code class="code-voice">    <span class="n">XYZAddToDoItemViewController</span> <span class="o">*</span><span class="n">source</span> <span class="o">=</span> <span class="p">[</span><span class="n">segue</span> <span class="n">sourceViewController</span><span class="p">];</span>
</code></li>
        <li><code class="code-voice">    <span class="n">XYZToDoItem</span> <span class="o">*</span><span class="n">item</span> <span class="o">=</span> <span class="n">source</span><span class="p">.</span><span class="n">toDoItem</span><span class="p">;</span>
</code></li>
        <li><code class="code-voice">    <span class="k">if</span> <span class="p">(</span><span class="n">item</span> <span class="o">!=</span> <span class="nb">nil</span><span class="p">)</span> <span class="p">{</span>
</code></li>
        <li><code class="code-voice">        <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">toDoItems</span> <span class="nl">addObject:</span><span class="n">item</span><span class="p">];</span>
</code></li>
        <li><code class="code-voice">        <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">tableView</span> <span class="n">reloadData</span><span class="p">];</span>
</code></li>
        <li><code class="code-voice">    <span class="p">}</span>
</code></li>
        <li><code class="code-voice"><span class="p">}</span>
</code></li>
    </ol>
  </div>
</section><p class="para">
  <em>检查点：</em>运行您的应用程序。现在，当您点按添加按钮 (<code class="code-voice">+</code>) 并创建一个新项目时，它应该会显示在待办事项列表中。恭喜您！您已经创建了一个应用程序，它能接收用户的输入，将其储存在对象中，并在两个视图控制器之间传递该对象。对于基于串联图的应用程序，这是在场景之间移动数据的基础。
</p>
  
</section>
<section class="section">
  <a name="//apple_ref/doc/uid/TP40012668-CH10-SW7"></a>
  <h3 class="section-name" tabindex="0">小结</h3>
  <p class="para">
  您差不多完成了开发 iOS 应用程序的入门之旅。最后一部分更详细地讲述了如何查询文稿材料，并且为您学习创建更高级的应用程序给出了一些后续建议。
</p>
  
</section>

  	
 	<section id="next_previous" class="">
    		<p class="previous-link"><a href="writingacustomclass.html#//apple_ref/doc/uid/TP40012668-CH18-SW1" data-id="//apple_ref/doc/uid/TP40012668-CH18-SW1">编写自定类</a></p>
  			<p class="next-link"><a href="iostechnologies.html#//apple_ref/doc/uid/TP40012668-CH11-SW1" data-id="//apple_ref/doc/uid/TP40012668-CH11-SW1">iOS 技术</a></p>
  <p class="copyright">Copyright &#x00a9; 2014 Apple Inc. All rights reserved. <a class="link" href="../../../../../../www.apple.com/legal/internet-services/terms/site.html" target="_blank" rel='external'>Terms of Use</a>   |  <a class="link" href="../../../../../../www.apple.com/legal/privacy/default.htm" target="_blank" rel='external'>Privacy Policy</a>  |  Updated: 2014-07-15
  </p>
  </section>
</article>

    </div>
    <div id='big_button'></div>
    <footer id="footer">
  
  <script src="../assets/javascript/devpubs-1.1.15.js" type="text/javascript" charset="utf-8"></script>
  
</footer>

    
  </body>
    <div id="blackout">
    <div id="preload"></div>
</div>


</div>

</html>
